#!/usr/bin/expect -f

set timeout 3
set password "Grad123!\$"

spawn ssh nbhtd@hellbender.rnet.missouri.edu "ls -lh ~/melsi_simulations/hellbender/skiome* 2>/dev/null | head -20"

expect {
    -re "(password|Password):" {
        send "$password\r"
        exp_continue
    }
    "Permission denied" {
        puts "Authentication failed"
        exit 1
    }
    timeout {
        puts "Connection timed out"
        exit 1
    }
    eof
}

wait
